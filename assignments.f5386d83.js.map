{"mappings":"8MAcO,MAAMA,UAAmBC,IAAAC,iBAAiBC,OAAOC,iBACtDC,cACEC,QAEAC,KAAKC,qBAAuB,qBAE5BD,KAAKE,eAAiB,KAGxBC,WACEH,KAAKI,SAGPC,eAAeA,GACbL,KAAKE,eAAiBG,EACtBL,KAAKI,SAGPA,SACEJ,KAAKM,UAAUC,IAAI,SACnBP,KAAKM,UAAUC,IAAI,cAEnB,IAAIF,EAAa,KACjB,MAAMG,EAAQ,IAAIZ,OAAOa,IAAIb,OAAOc,SAASC,YAC7C,GAAIX,KAAKE,eACPG,EAAaL,KAAKE,mBACb,CAAA,IAAIM,EAAMI,aAAaC,IAAI,cAIhC,OAJ+C,CAC/C,MAAMC,EAAeN,EAAMI,aAAaG,IAAI,cAC5CV,EAAaW,IAAAC,gBAAgBC,cAAcJ,IAK7C,IAAKT,EACH,OAGF,MACMc,EADqBC,SAASC,cAAcrB,KAAKC,sBAAsBqB,QACnCC,WAAU,GAE9CC,EAAQL,EAAeE,cAAc,+BAC3CG,EAAMC,KAAOC,IAAAC,UAAU,aAActB,EAAWuB,OAChDJ,EAAMK,UAAYxB,EAAWyB,KAE7B,MAAMC,EAAa/B,KAAKgC,aAAa,eAChBb,EAAeE,cAAc,kCACrCY,QAAU,KACrBjB,IAAAC,gBAAgBiB,iBAAiB7B,GAC7B0B,IACFnC,OAAOc,SAASe,KAAOM,IAI3B,MAAMI,EAAmBhB,EAAeE,cAAc,0BAA0BC,QAChF,GAAIjB,EAAW+B,SAAU,CACvB,MAAMC,EAAOF,EAAiBZ,WAAU,GACtBc,EAAKhB,cAAc,OAC3BiB,YAAYlB,SAASmB,eAAelC,EAAW+B,SAASZ,QAClEL,EAAemB,YAAYD,GAG7B,MAAMG,EAAoBrB,EAAeE,cAAc,2BAA2BC,QAC9EjB,EAAWoC,WACbpC,EAAWoC,UAAUC,QAAQC,IAC3B,MAAMN,EAAOG,EAAkBjB,WAAU,GACvBc,EAAKhB,cAAc,OAC3BiB,YAAYlB,SAASmB,eAAeI,EAASnB,QACvDL,EAAemB,YAAYD,KAI/BrC,KAAK4C,UAAY,GACjB5C,KAAKsC,YAAYnB,mBAIrBvB,OAAOiD,eAAeC,OAAO,oBAAqBrD,EAAY,CAAEsD,QAAS","sources":["src/wc-course-website/components/assignment/index.js"],"names":["Assignment","$d7f3e883460968146cf987de83434c3$init","DatabaseConsumer","window","HTMLDivElement","constructor","super","this","assignmentTemplateId","assignmentData","notified","render","assignment","classList","add","query","URL","location","toString","searchParams","has","assignmentId","get","$bf50779a85efbaabc121d74c5253077$init","databaseManager","getAssignment","assignmentNode","document","querySelector","content","cloneNode","title","href","$b16775c2d96d9b6bd584730e846d3822$init","createUrl","$loki","innerText","name","deletePath","getAttribute","onclick","deleteAssignment","specfileTemplate","specfile","node","appendChild","createTextNode","resourcesTemplate","resources","forEach","resource","innerHTML","customElements","define","extends"],"version":3,"file":"assignments.f5386d83.js.map","sourcesContent":["import { databaseManager } from '../../database';\nimport { DatabaseConsumer } from '../base/databaseConsumer';\nimport { createUrl } from '../../utilities/createUrl';\n\n/**\n * A component that will render a single assignment's panel. Will render the assignment passed trough properties or\n * through the `assignment` search param. All events are handled internally through the database manager.\n *\n * This element extends the base div element and will need to created as `<div is=\"single-assignment\">`\n *\n * @prop {Assignment} assignment - Write only assignment property to define which assignment to render.\n *\n * @element single-assignment\n */\nexport class Assignment extends DatabaseConsumer(window.HTMLDivElement) {\n  constructor() {\n    super();\n\n    this.assignmentTemplateId = '#single-assignment';\n\n    this.assignmentData = null;\n  }\n\n  notified() {\n    this.render();\n  }\n\n  set assignment(assignment) {\n    this.assignmentData = assignment;\n    this.render();\n  }\n\n  render() {\n    this.classList.add('panel');\n    this.classList.add('is-success');\n\n    let assignment = null;\n    const query = new window.URL(window.location.toString());\n    if (this.assignmentData) {\n      assignment = this.assignmentData;\n    } else if (query.searchParams.has('assignment')) {\n      const assignmentId = query.searchParams.get('assignment');\n      assignment = databaseManager.getAssignment(assignmentId);\n    } else {\n      return;\n    }\n\n    if (!assignment) {\n      return;\n    }\n\n    const assignmentTemplate = document.querySelector(this.assignmentTemplateId).content;\n    const assignmentNode = assignmentTemplate.cloneNode(true);\n\n    const title = assignmentNode.querySelector('[data-element=\"title-link\"]');\n    title.href = createUrl('assignment', assignment.$loki);\n    title.innerText = assignment.name;\n\n    const deletePath = this.getAttribute('delete-path');\n    const deleteButton = assignmentNode.querySelector('[data-element=\"delete-button\"]');\n    deleteButton.onclick = () => {\n      databaseManager.deleteAssignment(assignment);\n      if (deletePath) {\n        window.location.href = deletePath;\n      }\n    };\n\n    const specfileTemplate = assignmentNode.querySelector('[data-list=\"specfile\"]').content;\n    if (assignment.specfile) {\n      const node = specfileTemplate.cloneNode(true);\n      const container = node.querySelector('div');\n      container.appendChild(document.createTextNode(assignment.specfile.title));\n      assignmentNode.appendChild(node);\n    }\n\n    const resourcesTemplate = assignmentNode.querySelector('[data-list=\"resources\"]').content;\n    if (assignment.resources) {\n      assignment.resources.forEach(resource => {\n        const node = resourcesTemplate.cloneNode(true);\n        const container = node.querySelector('div');\n        container.appendChild(document.createTextNode(resource.title));\n        assignmentNode.appendChild(node);\n      });\n    }\n\n    this.innerHTML = '';\n    this.appendChild(assignmentNode);\n  }\n}\n\nwindow.customElements.define('single-assignment', Assignment, { extends: 'div' });\n"]}