!function(){var e=parcelRequire("8dc4bd82eadd83b135ac82ece8b7911c"),t=parcelRequire("7efb332d8ccb9a6b3f962ac63aa3525c"),n=parcelRequire("b2736226bbcf175e104b7e710aa92180"),r={},o={},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};null==i.parcelRequire&&(i.parcelRequire=function(e){if(e in o&&(o[e](),delete o[e]),e in r)return r[e];if("undefined"!=typeof module&&"function"==typeof module.require)return module.require(e);var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t},i.parcelRequire.register=function(e,t){r[e]=t},i.parcelRequire.registerBundle=function(e,t){o[e]=t,r[e]={}});var a={},c={};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var r,o,i,a=f(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).assignmentTemplateId="#single-assignment",e.assignmentData=null,e}return r=c,(o=[{key:"notified",value:function(){this.render()}},{key:"render",value:function(){this.classList.add("panel"),this.classList.add("is-success");var e=null,r=new window.URL(window.location.toString());if(this.assignmentData)e=this.assignmentData;else{if(!r.searchParams.has("assignment"))return;var o=r.searchParams.get("assignment");e=n().databaseManager.getAssignment(o)}if(e){var i=document.querySelector(this.assignmentTemplateId).content.cloneNode(!0),a=i.querySelector('[data-element="title-link"]');a.href=t().createUrl("assignment",e.$loki),a.innerText=e.name;var c=this.getAttribute("delete-path");i.querySelector('[data-element="delete-button"]').onclick=function(){n().databaseManager.deleteAssignment(e),c&&(window.location.href=c)};var u=i.querySelector('[data-list="specfile"]').content;if(e.specfile){var s=u.cloneNode(!0);s.querySelector("div").appendChild(document.createTextNode(e.specfile.title)),i.appendChild(s)}var l=i.querySelector('[data-list="resources"]').content;e.resources&&e.resources.forEach((function(e){var t=l.cloneNode(!0);t.querySelector("div").appendChild(document.createTextNode(e.title)),i.appendChild(t)})),this.innerHTML="",this.appendChild(i)}}},{key:"assignment",set:function(e){this.assignmentData=e,this.render()}}])&&s(r.prototype,o),i&&s(r,i),c}(e().DatabaseConsumer(window.HTMLDivElement));function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}c.Assignment=y,window.customElements.define("single-assignment",y,{extends:"div"});var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var r,o,i,a=g(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).assignmentsTemplateId="#assignments-list",e}return r=c,(o=[{key:"notified",value:function(){this.render()}},{key:"render",value:function(){var e=n().databaseManager.getAssignments(),r=document.querySelector(this.assignmentsTemplateId).content.cloneNode(!0),o=r.querySelector('[data-element="assignments"]');if(e.forEach((function(e){var t=new y;t.assignment=e,o.appendChild(t)})),new window.URL(window.location.toString()).searchParams.has("new")){var i=function(){window.location.href=t().createUrl("assignments")},a=r.querySelector('[data-element="new-modal"]');a.classList.add("is-active"),a.querySelector('[data-element="new-form"]').onsubmit=function(e){e.preventDefault();var r=e.target.querySelector("input").value,o=n().databaseManager.addAssignment(r);window.location.href=t().createUrl("assignment",o.$loki)},a.querySelector('[data-element="cancel-button"]').onclick=i,a.querySelector('[data-element="close-button"]').onclick=i}this.innerHTML="",this.appendChild(r)}}])&&b(r.prototype,o),i&&b(r,i),c}(e().DatabaseConsumer(window.HTMLElement));a.Assignments=S,window.customElements.define("assignments-list",S),parcelRequire.register("3763ea352e5af87aa16c2cc292de61e1",(function(){return a})),parcelRequire.register("2bdfa298c7645d53f818059b1880c5b4",(function(){return c}))}();
//# sourceMappingURL=assignments.6962049b.js.map
