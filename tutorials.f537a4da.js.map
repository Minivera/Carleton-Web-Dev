{"mappings":"8MAcO,MAAMA,UAAiBC,IAAAC,iBAAiBC,OAAOC,iBACpDC,cACEC,QAEAC,KAAKC,mBAAqB,mBAE1BD,KAAKE,aAAe,KAGtBC,WACEH,KAAKI,SAGPC,aAAaA,GACXL,KAAKE,aAAeG,EACpBL,KAAKI,SAGPA,SACEJ,KAAKM,UAAUC,IAAI,SACnBP,KAAKM,UAAUC,IAAI,WAEnB,IAAIF,EAAW,KACf,MAAMG,EAAQ,IAAIZ,OAAOa,IAAIb,OAAOc,SAASC,YAC7C,GAAIX,KAAKE,aACPG,EAAWL,KAAKE,iBACX,CAAA,IAAIM,EAAMI,aAAaC,IAAI,YAIhC,OAJ6C,CAC7C,MAAMC,EAAaN,EAAMI,aAAaG,IAAI,YAC1CV,EAAWW,IAAAC,gBAAgBC,aAAaJ,IAK1C,IAAKT,EACH,OAGF,MACMc,EADmBC,SAASC,cAAcrB,KAAKC,oBAAoBqB,QACnCC,WAAU,GAE1CC,EAAQL,EAAaE,cAAc,+BACzCG,EAAMC,KAAOC,IAAAC,UAAU,WAAYtB,EAASuB,OAC5CJ,EAAMK,UAAYxB,EAASyB,KAE3B,MAAMC,EAAa/B,KAAKgC,aAAa,eAChBb,EAAaE,cAAc,kCACnCY,QAAU,KACrBjB,IAAAC,gBAAgBiB,eAAe7B,GAC3B0B,IACFnC,OAAOc,SAASe,KAAOM,IAI3B,MAAMI,EAAmBhB,EAAaE,cAAc,0BAA0BC,QAC9E,GAAIjB,EAAS+B,SAAU,CACrB,MAAMC,EAAOF,EAAiBZ,WAAU,GACtBc,EAAKhB,cAAc,OAC3BiB,YAAYlB,SAASmB,eAAelC,EAAS+B,SAASZ,QAChEL,EAAamB,YAAYD,GAG3B,MAAMG,EAAoBrB,EAAaE,cAAc,2BAA2BC,QAC5EjB,EAASoC,WACXpC,EAASoC,UAAUC,QAAQC,IACzB,MAAMN,EAAOG,EAAkBjB,WAAU,GACvBc,EAAKhB,cAAc,OAC3BiB,YAAYlB,SAASmB,eAAeI,EAASnB,QACvDL,EAAamB,YAAYD,KAI7BrC,KAAK4C,UAAY,GACjB5C,KAAKsC,YAAYnB,iBAIrBvB,OAAOiD,eAAeC,OAAO,kBAAmBrD,EAAU,CAAEsD,QAAS","sources":["src/wc-course-website/components/tutorial/index.js"],"names":["Tutorial","$d7f3e883460968146cf987de83434c3$init","DatabaseConsumer","window","HTMLDivElement","constructor","super","this","tutorialTemplateId","tutorialData","notified","render","tutorial","classList","add","query","URL","location","toString","searchParams","has","tutorialId","get","$bf50779a85efbaabc121d74c5253077$init","databaseManager","getTutorials","tutorialNode","document","querySelector","content","cloneNode","title","href","$b16775c2d96d9b6bd584730e846d3822$init","createUrl","$loki","innerText","name","deletePath","getAttribute","onclick","deleteTutorial","specfileTemplate","specfile","node","appendChild","createTextNode","resourcesTemplate","resources","forEach","resource","innerHTML","customElements","define","extends"],"version":3,"file":"tutorials.f537a4da.js.map","sourcesContent":["import { databaseManager } from '../../database';\nimport { DatabaseConsumer } from '../base/databaseConsumer';\nimport { createUrl } from '../../utilities/createUrl';\n\n/**\n * A component that will render a single tutorial's panel. Will render the tutorial passed trough properties or\n * through the `tutorial` search param. All events are handled internally through the database manager.\n *\n * This element extends the base div element and will need to created as `<div is=\"single-tutorial\">`\n *\n * @prop {Tutorial} tutorial - Write only tutorial property to define which tutorial to render.\n *\n * @element single-tutorial\n */\nexport class Tutorial extends DatabaseConsumer(window.HTMLDivElement) {\n  constructor() {\n    super();\n\n    this.tutorialTemplateId = '#single-tutorial';\n\n    this.tutorialData = null;\n  }\n\n  notified() {\n    this.render();\n  }\n\n  set tutorial(tutorial) {\n    this.tutorialData = tutorial;\n    this.render();\n  }\n\n  render() {\n    this.classList.add('panel');\n    this.classList.add('is-info');\n\n    let tutorial = null;\n    const query = new window.URL(window.location.toString());\n    if (this.tutorialData) {\n      tutorial = this.tutorialData;\n    } else if (query.searchParams.has('tutorial')) {\n      const tutorialId = query.searchParams.get('tutorial');\n      tutorial = databaseManager.getTutorials(tutorialId);\n    } else {\n      return;\n    }\n\n    if (!tutorial) {\n      return;\n    }\n\n    const tutorialTemplate = document.querySelector(this.tutorialTemplateId).content;\n    const tutorialNode = tutorialTemplate.cloneNode(true);\n\n    const title = tutorialNode.querySelector('[data-element=\"title-link\"]');\n    title.href = createUrl('tutorial', tutorial.$loki);\n    title.innerText = tutorial.name;\n\n    const deletePath = this.getAttribute('delete-path');\n    const deleteButton = tutorialNode.querySelector('[data-element=\"delete-button\"]');\n    deleteButton.onclick = () => {\n      databaseManager.deleteTutorial(tutorial);\n      if (deletePath) {\n        window.location.href = deletePath;\n      }\n    };\n\n    const specfileTemplate = tutorialNode.querySelector('[data-list=\"specfile\"]').content;\n    if (tutorial.specfile) {\n      const node = specfileTemplate.cloneNode(true);\n      const container = node.querySelector('div');\n      container.appendChild(document.createTextNode(tutorial.specfile.title));\n      tutorialNode.appendChild(node);\n    }\n\n    const resourcesTemplate = tutorialNode.querySelector('[data-list=\"resources\"]').content;\n    if (tutorial.resources) {\n      tutorial.resources.forEach(resource => {\n        const node = resourcesTemplate.cloneNode(true);\n        const container = node.querySelector('div');\n        container.appendChild(document.createTextNode(resource.title));\n        tutorialNode.appendChild(node);\n      });\n    }\n\n    this.innerHTML = '';\n    this.appendChild(tutorialNode);\n  }\n}\n\nwindow.customElements.define('single-tutorial', Tutorial, { extends: 'div' });\n"]}