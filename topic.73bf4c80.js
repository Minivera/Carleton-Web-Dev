!function(){var e=parcelRequire("b2736226bbcf175e104b7e710aa92180");var t,n,r={};!function(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,r,o,a,c){return t((u=t(t(n,e),t(o,c)))<<(i=a)|u>>>32-i,r);var u,i}function o(e,t,r,o,a,c,u){return n(t&r|~t&o,e,t,a,c,u)}function a(e,t,r,o,a,c,u){return n(t&o|r&~o,e,t,a,c,u)}function c(e,t,r,o,a,c,u){return n(t^r^o,e,t,a,c,u)}function u(e,t,r,o,a,c,u){return n(r^(t|~o),e,t,a,c,u)}function i(e,n){var r,i,l,f,s;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var p=1732584193,d=-271733879,m=-1732584194,h=271733878;for(r=0;r<e.length;r+=16)i=p,l=d,f=m,s=h,p=o(p,d,m,h,e[r],7,-680876936),h=o(h,p,d,m,e[r+1],12,-389564586),m=o(m,h,p,d,e[r+2],17,606105819),d=o(d,m,h,p,e[r+3],22,-1044525330),p=o(p,d,m,h,e[r+4],7,-176418897),h=o(h,p,d,m,e[r+5],12,1200080426),m=o(m,h,p,d,e[r+6],17,-1473231341),d=o(d,m,h,p,e[r+7],22,-45705983),p=o(p,d,m,h,e[r+8],7,1770035416),h=o(h,p,d,m,e[r+9],12,-1958414417),m=o(m,h,p,d,e[r+10],17,-42063),d=o(d,m,h,p,e[r+11],22,-1990404162),p=o(p,d,m,h,e[r+12],7,1804603682),h=o(h,p,d,m,e[r+13],12,-40341101),m=o(m,h,p,d,e[r+14],17,-1502002290),p=a(p,d=o(d,m,h,p,e[r+15],22,1236535329),m,h,e[r+1],5,-165796510),h=a(h,p,d,m,e[r+6],9,-1069501632),m=a(m,h,p,d,e[r+11],14,643717713),d=a(d,m,h,p,e[r],20,-373897302),p=a(p,d,m,h,e[r+5],5,-701558691),h=a(h,p,d,m,e[r+10],9,38016083),m=a(m,h,p,d,e[r+15],14,-660478335),d=a(d,m,h,p,e[r+4],20,-405537848),p=a(p,d,m,h,e[r+9],5,568446438),h=a(h,p,d,m,e[r+14],9,-1019803690),m=a(m,h,p,d,e[r+3],14,-187363961),d=a(d,m,h,p,e[r+8],20,1163531501),p=a(p,d,m,h,e[r+13],5,-1444681467),h=a(h,p,d,m,e[r+2],9,-51403784),m=a(m,h,p,d,e[r+7],14,1735328473),p=c(p,d=a(d,m,h,p,e[r+12],20,-1926607734),m,h,e[r+5],4,-378558),h=c(h,p,d,m,e[r+8],11,-2022574463),m=c(m,h,p,d,e[r+11],16,1839030562),d=c(d,m,h,p,e[r+14],23,-35309556),p=c(p,d,m,h,e[r+1],4,-1530992060),h=c(h,p,d,m,e[r+4],11,1272893353),m=c(m,h,p,d,e[r+7],16,-155497632),d=c(d,m,h,p,e[r+10],23,-1094730640),p=c(p,d,m,h,e[r+13],4,681279174),h=c(h,p,d,m,e[r],11,-358537222),m=c(m,h,p,d,e[r+3],16,-722521979),d=c(d,m,h,p,e[r+6],23,76029189),p=c(p,d,m,h,e[r+9],4,-640364487),h=c(h,p,d,m,e[r+12],11,-421815835),m=c(m,h,p,d,e[r+15],16,530742520),p=u(p,d=c(d,m,h,p,e[r+2],23,-995338651),m,h,e[r],6,-198630844),h=u(h,p,d,m,e[r+7],10,1126891415),m=u(m,h,p,d,e[r+14],15,-1416354905),d=u(d,m,h,p,e[r+5],21,-57434055),p=u(p,d,m,h,e[r+12],6,1700485571),h=u(h,p,d,m,e[r+3],10,-1894986606),m=u(m,h,p,d,e[r+10],15,-1051523),d=u(d,m,h,p,e[r+1],21,-2054922799),p=u(p,d,m,h,e[r+8],6,1873313359),h=u(h,p,d,m,e[r+15],10,-30611744),m=u(m,h,p,d,e[r+6],15,-1560198380),d=u(d,m,h,p,e[r+13],21,1309151649),p=u(p,d,m,h,e[r+4],6,-145523070),h=u(h,p,d,m,e[r+11],10,-1120210379),m=u(m,h,p,d,e[r+2],15,718787259),d=u(d,m,h,p,e[r+9],21,-343485551),p=t(p,i),d=t(d,l),m=t(m,f),h=t(h,s);return[p,d,m,h]}function l(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function f(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function s(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function p(e){return unescape(encodeURIComponent(e))}function d(e){return function(e){return l(i(f(e),8*e.length))}(p(e))}function m(e,t){return function(e,t){var n,r,o=f(e),a=[],c=[];for(a[15]=c[15]=void 0,o.length>16&&(o=i(o,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],c[n]=1549556828^o[n];return r=i(a.concat(f(t)),512+8*t.length),l(i(c.concat(r),640))}(p(e),p(t))}function h(e,t,n){return t?n?m(t,e):s(m(t,e)):n?d(e):s(d(e))}r?r=h:e.md5=h}(r);var o;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var c=/\+/g;e=e.split(t);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var l=e.length;i>0&&l>i&&(l=i);for(var f=0;f<l;++f){var s,p,d,m,h=e[f].replace(c,"%20"),y=h.indexOf(n);y>=0?(s=h.substr(0,y),p=h.substr(y+1)):(s=h,p=""),d=decodeURIComponent(s),m=decodeURIComponent(p),a(o,d)?u(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o};var c,u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};c=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?f(s(e),(function(r){var o=encodeURIComponent(i(r))+n;return l(e[r])?f(e[r],(function(e){return o+encodeURIComponent(i(e))})).join(t):o+encodeURIComponent(i(e[r]))})).join(t):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(e)):""};var l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function f(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},p=(n=c,/^[0-9a-f]{32}$/);function d(e,t){if(e)return"boolean"==typeof e.protocol?e.protocol:"http"!==e.protocol&&("https"===e.protocol||void 0)}function m(e){return(e="string"==typeof e?e.trim().toLowerCase():"unspecified").match(p)?e:r(e)}function h(e){var t=n(function(e){var t={},n={protocol:1,format:1};for(var r in e)n[r]||(t[r]=e[r]);return t}(e));return t&&"?"+t||""}t={url:function(e,t,n){var r="//www.gravatar.com/avatar/";t&&t.cdn?(r=t.cdn+"/avatar/",delete t.cdn):(t&&t.protocol&&(n=d(t)),void 0!==n&&(r=n?"https://s.gravatar.com/avatar/":"http://www.gravatar.com/avatar/"));var o=h(t);return r+m(e)+o},profile_url:function(e,t,n){var r=null!=t&&null!=t.format?String(t.format):"json";if(t&&t.cdn)o=t.cdn+"/",delete t.cdn;else{t&&t.protocol&&(n=d(t));var o=n?"https://secure.gravatar.com/":"http://www.gravatar.com/"}var a=h(t);return o+m(e)+"."+r+a}};var y,b=(y=t)&&y.__esModule?y.default:y,v=[{name:"admin",role:"admin",email:"admin@carleton.ca",avatar:b.url("admin@carleton.ca",{s:"200",r:"pg",d:"identicon"})},{name:"student",role:"student",email:"student@carleton.ca",avatar:b.url("student@carleton.ca",{s:"200",r:"pg",d:"identicon"})}],g=function(e){return v.find((function(t){return t.name===e}))};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,window.HTMLElement);var n,r,o,a=k(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).forumTopicTemplateId="#forum-topic",e.unsuscriber=null,e.render(),e}return n=c,(r=[{key:"connectedCallback",value:function(){this.isConnected&&(this.unsuscriber=e().databaseManager.subscribe(this.render.bind(this)))}},{key:"disconnectedCallback",value:function(){this.unsuscriber&&this.unsuscriber()}},{key:"render",value:function(){if(e().databaseManager.ready){var t=null,n=new window.URL(window.location.toString());if(n.searchParams.has("topic")){t=n.searchParams.get("topic");var r=e().databaseManager.getForumTopic(t),o=document.querySelector(this.forumTopicTemplateId).content.cloneNode(!0),a=r.comments[0],c=g(a.user),u=o.querySelector('[data-element="author-avatar"]');u.src=c.avatar,u.alt=c.name,o.querySelector('[data-element="title"]').innerText=r.title,o.querySelector('[data-element="author-name"]').innerText=c.name,o.querySelector('[data-element="author-email"]').innerText=c.email;var i=o.querySelector('[data-element="content"]');a.content.split("\n").forEach((function(e){var t=document.createElement("p");t.innerHTML=e,i.prepend(t)}));var l=o.querySelector('[data-element="thread"]');r.comments.slice(1).forEach((function(t){var n=o.querySelector('[data-element="comment"]').content.cloneNode(!0),r=g(t.user),a=n.querySelector('[data-element="author-avatar"]');a.src=r.avatar,a.alt=r.name,n.querySelector('[data-element="author-name"]').innerText=r.name,n.querySelector('[data-element="author-email"]').innerText=r.email;var c=n.querySelector('[data-element="content"]');t.content.split("\n").forEach((function(e){var t=document.createElement("p");t.innerHTML=e,c.prepend(t)})),n.querySelector('[data-element="delete-button"]').onclick=function(){e().databaseManager.deleteTopicComment(t)},l.appendChild(n)})),o.querySelector('[data-element="new-comment"]').onsubmit=function(t){t.preventDefault();var n=t.target.querySelector('[data-element="topic-content"]').value;e().databaseManager.addTopicComment(r.$loki,v[0].name,n)},this.innerHTML="",this.appendChild(o)}}}}])&&S(n.prototype,r),o&&S(n,o),c}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}window.customElements.define("forum-topic",T);var E=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,window.HTMLElement);var n,r,o,a=P(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).unsuscriber=null,e.render(),e}return n=c,(r=[{key:"connectedCallback",value:function(){this.isConnected&&(this.unsuscriber=e().databaseManager.subscribe(this.render.bind(this)))}},{key:"disconnectedCallback",value:function(){this.unsuscriber&&this.unsuscriber()}},{key:"getId",value:function(e){var t=new window.URL(window.location.toString());return this.hasAttribute("element-id")?this.getAttribute("element-id"):t.searchParams.has(e)?parseInt(t.searchParams.get(e)):-1}},{key:"render",value:function(){if(e().databaseManager.ready){var t=null,n=this.getAttribute("source");switch(n){case"lectures":t="/wc-course-website/lecture/index.html?lecture=".concat(e().databaseManager.getLecture(this.getId("lecture")).$loki);break;case"tutorials":t="/wc-course-website/tutorial/index.html?tutorial=".concat(e().databaseManager.getTutorial(this.getId("tutorial")).$loki);break;case"assignments":t="/wc-course-website/assignment/index.html?assignment=".concat(e().databaseManager.getAssignment(this.getId("assignment")).$loki);break;case"forums":t="/wc-course-website/forum/index.html?forum=".concat(e().databaseManager.getForum(this.getId("forum")).$loki);break;default:throw new Error("Unknown course content type ".concat(n))}this.innerHTML='<a href="'.concat(t,'">').concat(this.innerHTML,"</a>")}}}])&&M(n.prototype,r),o&&M(n,o),c}();window.customElements.define("content-link",E)}();
//# sourceMappingURL=topic.73bf4c80.js.map
