<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Benchmarks: Overview | Project documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Benchmarks: Overview | Project documentation"><meta data-react-helmet="true" name="description" content="As part of the development of the diffing algorithm for VirtualDOM, I ran some benchmarks and prepared different"><meta data-react-helmet="true" property="og:description" content="As part of the development of the diffing algorithm for VirtualDOM, I ran some benchmarks and prepared different"><meta data-react-helmet="true" property="og:url" content="https://minivera.github.io/carleton-web-dev/project/docs/benchmarks/overview"><link data-react-helmet="true" rel="shortcut icon" href="/carleton-web-dev/project/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://minivera.github.io/carleton-web-dev/project/docs/benchmarks/overview"><link rel="stylesheet" href="/carleton-web-dev/project/docs/styles.c4f2caf0.css">
<link rel="preload" href="/carleton-web-dev/project/docs/styles.316863d3.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/runtime~main.f4bbde36.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/main.d0545e58.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/1.e11dfcd7.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/2.a5e7c51a.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/21.7d91ea8a.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/1d68c1ea.9947ab1a.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/17896441.f5249667.js" as="script">
<link rel="preload" href="/carleton-web-dev/project/docs/cdcc51d2.5d3a1e03.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/carleton-web-dev/project/docs/"><strong class="navbar__title">Project documentation</strong></a><a class="navbar__item navbar__link" href="/carleton-web-dev/project/docs/introduction/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/carleton-web-dev/project/docs/context/overview">Context</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/carleton-web-dev/project/docs/benchmarks/overview">Benchmarks</a><a class="navbar__item navbar__link" href="/carleton-web-dev/project/docs/recipes/recipe-index">Recipes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Minivera/carleton-web-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/carleton-web-dev/project/docs/"><strong class="navbar__title">Project documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/carleton-web-dev/project/docs/introduction/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/carleton-web-dev/project/docs/context/overview">Context</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/carleton-web-dev/project/docs/benchmarks/overview">Benchmarks</a></li><li class="menu__list-item"><a class="menu__link" href="/carleton-web-dev/project/docs/recipes/recipe-index">Recipes</a></li><li class="menu__list-item"><a href="https://github.com/Minivera/carleton-web-dev" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/">Library overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/introduction/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/introduction/events-conditionals-loops">Events, Conditionals &amp; Loops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/introduction/applications">Creating applications</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Context</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/context/overview">Context: Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/context/callbacks">Context: Callbacks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/context/state-reducer">Context: State with reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/context/react-context">Context: React-like context API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/context/react-hooks">Context: React-like Hooks API</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Benchmarks</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/carleton-web-dev/project/docs/benchmarks/overview">Benchmarks: Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/carleton-web-dev/project/docs/benchmarks/benchmark-report">Benchmarks: Performance report</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Recipes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/recipes/recipe-index">Recipes: Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/recipes/multiple-hooks">Recipes: Multiple lifecycle hooks per component</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/carleton-web-dev/project/docs/recipes/render-prop">Recipes: Render property or function</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Benchmarks: Overview</h1></header><div class="markdown"><p>As part of the development of the diffing algorithm for VirtualDOM, I ran some benchmarks and prepared different
variations of the same algorithm. Before we go over the results, the algorithms, and ideas on how to improve their
performance, let&#x27;s review how the benchmarks work.</p><p>You may find the up to date benchmarks on this page: <a href="https://minivera.github.io/carleton-web-dev/project/benchmark-data/table.html" target="_blank" rel="noopener noreferrer">benchmarks</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-were-the-benchmarks-run"></a>How were the benchmarks run?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-were-the-benchmarks-run" title="Direct link to heading">#</a></h2><p>The benchmarks were run with the <a href="https://github.com/krausest/js-framework-benchmark" target="_blank" rel="noopener noreferrer">js-framework-benchmark tool</a>.
This tool records the performance of various frameworks using a selenium browser. The browser executes the required
commands, the tool calculates if the benchmark ran successfully and then calculate the memory weight or duration of the
test.</p><p>Usually, these benchmarks are executed using the 40+ frameworks available in the tool, but for the purposes of this
experiment and time, I only ran five benchmarks. Three of those benchmarks are the three variations on the diffing
algorithm for the framework and the two other are the base cases. The first base case is the framework executions using
vanilla JavaScript functions. This execution is intended to give an idea of the default performance from the browser,
without any framework. You would usually experiment this kind of performance when executing the exact JavaScript
functions on the DOM to crete the results you are looking for.</p><p>Most frameworks, however, use more complex system to give the ability to the developer to program possible variations
without having to plan for any of them. In the case of React, vue, VirtualDOM, or many other frameworks, we use the
virtual DOM pattern to process mutations on the DOM based on what a component creates.</p><p>This leads us to the second base case. To be able to compare this framework with official frameworks, I ran the same
benchmarks with React without keys. Since our framework doesn&#x27;t use keys, not assigning any keys when creating elements
in a loop in React will give us similar performance to what we&#x27;d expect with our framework.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-to-read-the-benchmarks"></a>How to read the benchmarks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-to-read-the-benchmarks" title="Direct link to heading">#</a></h2><p>The benchmarks are divided into three tables. Each table can be sorted by clicking on one of the links of the left
side of the table. The head of the table will name each execution, letting you know which framework the numbers
of that column are for.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="duration-table"></a>Duration table<a aria-hidden="true" tabindex="-1" class="hash-link" href="#duration-table" title="Direct link to heading">#</a></h3><div><div style="shape-outside:margin-box;float:left;margin-right:-225px"><img alt="Duration table" src="/carleton-web-dev/project/docs/img/duration.png"></div><p style="padding-top:30px">The duration table shows the time take to execute specific operations. For each of the operations, the benchmarking tool executes specific commands on the page 10 times. After having ran the 10 operations, it takes the mean time of execution for each of these 10 runs in milliseconds and that&#x27;s the information added in the table. For all the recorded times, the smaller the number the better. The rows are then colored in order from green to red to show which framework fares better over the others.</p><ul><li><b>create rows</b>: Duration for creating 1,000 rows after the page loaded (no warmup).</li><li><b>replace all rows</b>: Duration for replacing all 1,000 rows of the table (with 5 warmup iterations).</li><li><b>partial update</b>: Time to update the text of every 10th row for a table with 10,000 rows (with 5 warmup iterations).</li><li><b>select row</b>: Duration to highlight a row in response to a click on the row. (with 5 warmup iterations).</li><li><b>swap rows</b>: Time to swap 2 rows on a table with 1,000 rows. (with 5 warmup iterations).</li><li><b>remove row</b>: Duration to remove a row for a table with 1,000 rows. (with 5 warmup iterations).</li><li><b>create many rows</b>: Duration to create 10,000 rows (no warmup).</li><li><b>append rows to large table</b>: Duration for adding 1,000 rows on a table of 10,000 rows (no warmup).</li><li><b>clear rows</b>: Duration to clear the table filled with 10,000 rows. (no warmup).</li></ul></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="startup-table"></a>Startup table<a aria-hidden="true" tabindex="-1" class="hash-link" href="#startup-table" title="Direct link to heading">#</a></h3><div><div style="shape-outside:margin-box;float:left;margin-right:20px"><img alt="Duration table" src="/carleton-web-dev/project/docs/img/startup.png"></div><p style="padding-top:30px">The startup table shows information on the time to interactive for the library. The weight and JavaScript complexity of a framework impact those metrics. The larger a framework is, the longer it takes for that script to be loaded on the network and parser by the browser. The benchmarks use lighthouse to calculate those metrics.</p><ul><li><b>consistently interactive</b>: The lighthouse metric TimeToConsistentlyInteractive: A pessimistic TTI - when the CPU and network are both definitely very idle. (no more CPU tasks over 50ms).</li><li><b>script bootup time</b>: The lighthouse metric ScriptBootUpTtime: The total ms required to parse/compile/evaluate all the page&#x27;s scripts.</li><li><b>main thread work cost</b>: The lighthouse metric MainThreadWorkCost: Total amount of time spent doing work on the main thread. includes style/layout/etc.</li><li><b>total byte weight</b>: The lighthouse metric TotalByteWeight: Network transfer cost (post-compression) of all the resources loaded into the page.</li></ul></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="memory-table"></a>Memory table<a aria-hidden="true" tabindex="-1" class="hash-link" href="#memory-table" title="Direct link to heading">#</a></h3><div><div style="shape-outside:margin-box;float:left;margin-right:20px"><img alt="Duration table" src="/carleton-web-dev/project/docs/img/memory.png"></div><p style="padding-top:30px">The memory table shows the memory usage for the library. Library using more memory can slow down slower systems and may show memory problems in the system (Like uncleaned nodes that still have some dangling reference). The virtual DOM uses a good amount of memory by design - since the whole idea of the virtual DOM is to keep a copy of the DOM tree in memory - and so it is important to make sure frameworks do not consume an unreasonable amount of memory and slow down mobile devices or slow systems.</p><ul><li><b>ready memory</b>: Memory usage after page load.</li><li><b>run memory</b>: Memory usage after adding 1,000 rows.</li><li><b>update memory</b>: Memory usage after clicking 5 times update for a table with 1,000 rows.</li><li><b>replace memory</b>: Memory usage after clicking 5 times create 1,000 rows.</li><li><b>repeated clear memory</b>: Memory usage after creating and clearing 1,000 rows for 5 times.</li><li><b>update memory</b>: Memory usage after clicking 5 times update for a table with 1,000 rows.</li><li><b>startup time</b>: Duration for loading and parsing the javascript code and rendering the page.</li></ul></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/carleton-web-dev/project/docs/context/react-hooks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Context: React-like Hooks API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/carleton-web-dev/project/docs/benchmarks/benchmark-report"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Benchmarks: Performance report Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-were-the-benchmarks-run" class="table-of-contents__link">How were the benchmarks run?</a></li><li><a href="#how-to-read-the-benchmarks" class="table-of-contents__link">How to read the benchmarks</a><ul><li><a href="#duration-table" class="table-of-contents__link">Duration table</a></li><li><a href="#startup-table" class="table-of-contents__link">Startup table</a></li><li><a href="#memory-table" class="table-of-contents__link">Memory table</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/carleton-web-dev/project/docs/docs/">Documentation</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Minivera/carleton-web-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Guillaume St-Pierre. Built with Docusaurus.</div></div></div></footer></div>
<script src="/carleton-web-dev/project/docs/styles.316863d3.js"></script>
<script src="/carleton-web-dev/project/docs/runtime~main.f4bbde36.js"></script>
<script src="/carleton-web-dev/project/docs/main.d0545e58.js"></script>
<script src="/carleton-web-dev/project/docs/1.e11dfcd7.js"></script>
<script src="/carleton-web-dev/project/docs/2.a5e7c51a.js"></script>
<script src="/carleton-web-dev/project/docs/21.7d91ea8a.js"></script>
<script src="/carleton-web-dev/project/docs/1d68c1ea.9947ab1a.js"></script>
<script src="/carleton-web-dev/project/docs/17896441.f5249667.js"></script>
<script src="/carleton-web-dev/project/docs/cdcc51d2.5d3a1e03.js"></script>
</body>
</html>