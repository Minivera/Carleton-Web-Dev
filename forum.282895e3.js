!function(){var t=parcelRequire("8dc4bd82eadd83b135ac82ece8b7911c"),e=parcelRequire("7efb332d8ccb9a6b3f962ac63aa3525c"),r=parcelRequire("b2736226bbcf175e104b7e710aa92180");var n,o,a={};!function(t){function e(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function r(t,r,n,o,a,c){return e((u=e(e(r,t),e(o,c)))<<(i=a)|u>>>32-i,n);var u,i}function n(t,e,n,o,a,c,u){return r(e&n|~e&o,t,e,a,c,u)}function o(t,e,n,o,a,c,u){return r(e&o|n&~o,t,e,a,c,u)}function c(t,e,n,o,a,c,u){return r(e^n^o,t,e,a,c,u)}function u(t,e,n,o,a,c,u){return r(n^(e|~o),t,e,a,c,u)}function i(t,r){var a,i,l,f,p;t[r>>5]|=128<<r%32,t[14+(r+64>>>9<<4)]=r;var s=1732584193,d=-271733879,m=-1732584194,v=271733878;for(a=0;a<t.length;a+=16)i=s,l=d,f=m,p=v,s=n(s,d,m,v,t[a],7,-680876936),v=n(v,s,d,m,t[a+1],12,-389564586),m=n(m,v,s,d,t[a+2],17,606105819),d=n(d,m,v,s,t[a+3],22,-1044525330),s=n(s,d,m,v,t[a+4],7,-176418897),v=n(v,s,d,m,t[a+5],12,1200080426),m=n(m,v,s,d,t[a+6],17,-1473231341),d=n(d,m,v,s,t[a+7],22,-45705983),s=n(s,d,m,v,t[a+8],7,1770035416),v=n(v,s,d,m,t[a+9],12,-1958414417),m=n(m,v,s,d,t[a+10],17,-42063),d=n(d,m,v,s,t[a+11],22,-1990404162),s=n(s,d,m,v,t[a+12],7,1804603682),v=n(v,s,d,m,t[a+13],12,-40341101),m=n(m,v,s,d,t[a+14],17,-1502002290),s=o(s,d=n(d,m,v,s,t[a+15],22,1236535329),m,v,t[a+1],5,-165796510),v=o(v,s,d,m,t[a+6],9,-1069501632),m=o(m,v,s,d,t[a+11],14,643717713),d=o(d,m,v,s,t[a],20,-373897302),s=o(s,d,m,v,t[a+5],5,-701558691),v=o(v,s,d,m,t[a+10],9,38016083),m=o(m,v,s,d,t[a+15],14,-660478335),d=o(d,m,v,s,t[a+4],20,-405537848),s=o(s,d,m,v,t[a+9],5,568446438),v=o(v,s,d,m,t[a+14],9,-1019803690),m=o(m,v,s,d,t[a+3],14,-187363961),d=o(d,m,v,s,t[a+8],20,1163531501),s=o(s,d,m,v,t[a+13],5,-1444681467),v=o(v,s,d,m,t[a+2],9,-51403784),m=o(m,v,s,d,t[a+7],14,1735328473),s=c(s,d=o(d,m,v,s,t[a+12],20,-1926607734),m,v,t[a+5],4,-378558),v=c(v,s,d,m,t[a+8],11,-2022574463),m=c(m,v,s,d,t[a+11],16,1839030562),d=c(d,m,v,s,t[a+14],23,-35309556),s=c(s,d,m,v,t[a+1],4,-1530992060),v=c(v,s,d,m,t[a+4],11,1272893353),m=c(m,v,s,d,t[a+7],16,-155497632),d=c(d,m,v,s,t[a+10],23,-1094730640),s=c(s,d,m,v,t[a+13],4,681279174),v=c(v,s,d,m,t[a],11,-358537222),m=c(m,v,s,d,t[a+3],16,-722521979),d=c(d,m,v,s,t[a+6],23,76029189),s=c(s,d,m,v,t[a+9],4,-640364487),v=c(v,s,d,m,t[a+12],11,-421815835),m=c(m,v,s,d,t[a+15],16,530742520),s=u(s,d=c(d,m,v,s,t[a+2],23,-995338651),m,v,t[a],6,-198630844),v=u(v,s,d,m,t[a+7],10,1126891415),m=u(m,v,s,d,t[a+14],15,-1416354905),d=u(d,m,v,s,t[a+5],21,-57434055),s=u(s,d,m,v,t[a+12],6,1700485571),v=u(v,s,d,m,t[a+3],10,-1894986606),m=u(m,v,s,d,t[a+10],15,-1051523),d=u(d,m,v,s,t[a+1],21,-2054922799),s=u(s,d,m,v,t[a+8],6,1873313359),v=u(v,s,d,m,t[a+15],10,-30611744),m=u(m,v,s,d,t[a+6],15,-1560198380),d=u(d,m,v,s,t[a+13],21,1309151649),s=u(s,d,m,v,t[a+4],6,-145523070),v=u(v,s,d,m,t[a+11],10,-1120210379),m=u(m,v,s,d,t[a+2],15,718787259),d=u(d,m,v,s,t[a+9],21,-343485551),s=e(s,i),d=e(d,l),m=e(m,f),v=e(v,p);return[s,d,m,v]}function l(t){var e,r="",n=32*t.length;for(e=0;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function f(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function p(t){var e,r,n="";for(r=0;r<t.length;r+=1)e=t.charCodeAt(r),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function s(t){return unescape(encodeURIComponent(t))}function d(t){return function(t){return l(i(f(t),8*t.length))}(s(t))}function m(t,e){return function(t,e){var r,n,o=f(t),a=[],c=[];for(a[15]=c[15]=void 0,o.length>16&&(o=i(o,8*t.length)),r=0;r<16;r+=1)a[r]=909522486^o[r],c[r]=1549556828^o[r];return n=i(a.concat(f(e)),512+8*e.length),l(i(c.concat(n),640))}(s(t),s(e))}function v(t,e,r){return e?r?m(e,t):p(m(e,t)):r?d(t):p(d(t))}a?a=v:t.md5=v}(a);var c;function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}c=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var c=1e3;n&&"number"==typeof n.maxKeys&&(c=n.maxKeys);var i=t.length;c>0&&i>c&&(i=c);for(var f=0;f<i;++f){var p,s,d,m,v=t[f].replace(a,"%20"),y=v.indexOf(r);y>=0?(p=v.substr(0,y),s=v.substr(y+1)):(p=v,s=""),d=decodeURIComponent(p),m=decodeURIComponent(s),u(o,d)?l(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o};var i,l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};i=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?s(d(t),(function(n){var o=encodeURIComponent(f(n))+r;return p(t[n])?s(t[n],(function(t){return o+encodeURIComponent(f(t))})).join(e):o+encodeURIComponent(f(t[n]))})).join(e):n?encodeURIComponent(f(n))+r+encodeURIComponent(f(t)):""};var p=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var d=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e},m=(o=i,/^[0-9a-f]{32}$/);function v(t,e){if(t)return"boolean"==typeof t.protocol?t.protocol:"http"!==t.protocol&&("https"===t.protocol||void 0)}function y(t){return(t="string"==typeof t?t.trim().toLowerCase():"unspecified").match(m)?t:a(t)}function h(t){var e=o(function(t){var e={},r={protocol:1,format:1};for(var n in t)r[n]||(e[n]=t[n]);return e}(t));return e&&"?"+e||""}n={url:function(t,e,r){var n="//www.gravatar.com/avatar/";e&&e.cdn?(n=e.cdn+"/avatar/",delete e.cdn):(e&&e.protocol&&(r=v(e)),void 0!==r&&(n=r?"https://s.gravatar.com/avatar/":"http://www.gravatar.com/avatar/"));var o=h(e);return n+y(t)+o},profile_url:function(t,e,r){var n=null!=e&&null!=e.format?String(e.format):"json";if(e&&e.cdn)o=e.cdn+"/",delete e.cdn;else{e&&e.protocol&&(r=v(e));var o=r?"https://secure.gravatar.com/":"http://www.gravatar.com/"}var a=h(e);return o+y(t)+"."+n+a}};var b,g=(b=n)&&b.__esModule?b.default:b,w=[{name:"admin",role:"admin",email:"admin@carleton.ca",avatar:g.url("admin@carleton.ca",{s:"200",r:"pg",d:"identicon"})},{name:"student",role:"student",email:"student@carleton.ca",avatar:g.url("student@carleton.ca",{s:"200",r:"pg",d:"identicon"})}];function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=q(t);if(e){var o=q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return C(this,r)}}function C(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(u,t);var n,o,a,c=R(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).forumTopicsTemplateId="#forum-topics",t.forumData=null,t}return n=u,(o=[{key:"notified",value:function(){this.render()}},{key:"render",value:function(){var t=null,n=new window.URL(window.location.toString());if(this.forumData)t=this.forumData;else{if(!n.searchParams.has("forum"))return;var o=n.searchParams.get("forum");t=r().databaseManager.getForum(o)}if(t){var a=document.querySelector(this.forumTopicsTemplateId).content.cloneNode(!0);t.topics.length?t.topics.forEach((function(n){var o,c=a.querySelector('[data-list="forum-topic"]').content.cloneNode(!0),u=n.comments[0],i=(o=u.user,w.find((function(t){return t.name===o}))),l=c.querySelector('[data-element="author-avatar"]');l.src=i.avatar,l.alt=i.name;var f=c.querySelector('[data-element="title"]');f.href=e().createUrl("topic",t.$loki,n.$loki),f.innerText=n.title,c.querySelector('[data-element="author-name"]').innerText=i.name,c.querySelector('[data-element="author-email"]').innerText=i.email;var p=c.querySelector('[data-element="content"]');u.content.split("\n").forEach((function(t){var e=document.createElement("p");e.innerHTML=t,p.prepend(e)})),c.querySelector('[data-element="delete-button"]').onclick=function(){r().databaseManager.deleteForumTopic(n)},a.prepend(c)})):a.querySelector('[data-element="no-topics"]').style.display="block",a.querySelector('[data-element="new-topic"]').onsubmit=function(n){n.preventDefault();var o=n.target.querySelector('[data-element="topic-name"]').value,a=n.target.querySelector('[data-element="topic-content"]').value,c=r().databaseManager.addForumTopic(t.$loki,o,w[0].name,a);window.location.href=e().createUrl("topic",t.$loki,c.$loki)},this.innerHTML="",this.appendChild(a)}}},{key:"forum",set:function(t){this.forumData=t,this.render()}}])&&j(n.prototype,o),a&&j(n,a),u}(t().DatabaseConsumer(window.HTMLElement));window.customElements.define("forum-topics",T)}();
//# sourceMappingURL=forum.282895e3.js.map
