!function(){var t=parcelRequire("b2736226bbcf175e104b7e710aa92180");var e,n,r={};!function(t){function e(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function n(t,n,r,o,a,c){return e((u=e(e(n,t),e(o,c)))<<(i=a)|u>>>32-i,r);var u,i}function o(t,e,r,o,a,c,u){return n(e&r|~e&o,t,e,a,c,u)}function a(t,e,r,o,a,c,u){return n(e&o|r&~o,t,e,a,c,u)}function c(t,e,r,o,a,c,u){return n(e^r^o,t,e,a,c,u)}function u(t,e,r,o,a,c,u){return n(r^(e|~o),t,e,a,c,u)}function i(t,n){var r,i,l,f,s;t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;var p=1732584193,d=-271733879,m=-1732584194,v=271733878;for(r=0;r<t.length;r+=16)i=p,l=d,f=m,s=v,p=o(p,d,m,v,t[r],7,-680876936),v=o(v,p,d,m,t[r+1],12,-389564586),m=o(m,v,p,d,t[r+2],17,606105819),d=o(d,m,v,p,t[r+3],22,-1044525330),p=o(p,d,m,v,t[r+4],7,-176418897),v=o(v,p,d,m,t[r+5],12,1200080426),m=o(m,v,p,d,t[r+6],17,-1473231341),d=o(d,m,v,p,t[r+7],22,-45705983),p=o(p,d,m,v,t[r+8],7,1770035416),v=o(v,p,d,m,t[r+9],12,-1958414417),m=o(m,v,p,d,t[r+10],17,-42063),d=o(d,m,v,p,t[r+11],22,-1990404162),p=o(p,d,m,v,t[r+12],7,1804603682),v=o(v,p,d,m,t[r+13],12,-40341101),m=o(m,v,p,d,t[r+14],17,-1502002290),p=a(p,d=o(d,m,v,p,t[r+15],22,1236535329),m,v,t[r+1],5,-165796510),v=a(v,p,d,m,t[r+6],9,-1069501632),m=a(m,v,p,d,t[r+11],14,643717713),d=a(d,m,v,p,t[r],20,-373897302),p=a(p,d,m,v,t[r+5],5,-701558691),v=a(v,p,d,m,t[r+10],9,38016083),m=a(m,v,p,d,t[r+15],14,-660478335),d=a(d,m,v,p,t[r+4],20,-405537848),p=a(p,d,m,v,t[r+9],5,568446438),v=a(v,p,d,m,t[r+14],9,-1019803690),m=a(m,v,p,d,t[r+3],14,-187363961),d=a(d,m,v,p,t[r+8],20,1163531501),p=a(p,d,m,v,t[r+13],5,-1444681467),v=a(v,p,d,m,t[r+2],9,-51403784),m=a(m,v,p,d,t[r+7],14,1735328473),p=c(p,d=a(d,m,v,p,t[r+12],20,-1926607734),m,v,t[r+5],4,-378558),v=c(v,p,d,m,t[r+8],11,-2022574463),m=c(m,v,p,d,t[r+11],16,1839030562),d=c(d,m,v,p,t[r+14],23,-35309556),p=c(p,d,m,v,t[r+1],4,-1530992060),v=c(v,p,d,m,t[r+4],11,1272893353),m=c(m,v,p,d,t[r+7],16,-155497632),d=c(d,m,v,p,t[r+10],23,-1094730640),p=c(p,d,m,v,t[r+13],4,681279174),v=c(v,p,d,m,t[r],11,-358537222),m=c(m,v,p,d,t[r+3],16,-722521979),d=c(d,m,v,p,t[r+6],23,76029189),p=c(p,d,m,v,t[r+9],4,-640364487),v=c(v,p,d,m,t[r+12],11,-421815835),m=c(m,v,p,d,t[r+15],16,530742520),p=u(p,d=c(d,m,v,p,t[r+2],23,-995338651),m,v,t[r],6,-198630844),v=u(v,p,d,m,t[r+7],10,1126891415),m=u(m,v,p,d,t[r+14],15,-1416354905),d=u(d,m,v,p,t[r+5],21,-57434055),p=u(p,d,m,v,t[r+12],6,1700485571),v=u(v,p,d,m,t[r+3],10,-1894986606),m=u(m,v,p,d,t[r+10],15,-1051523),d=u(d,m,v,p,t[r+1],21,-2054922799),p=u(p,d,m,v,t[r+8],6,1873313359),v=u(v,p,d,m,t[r+15],10,-30611744),m=u(m,v,p,d,t[r+6],15,-1560198380),d=u(d,m,v,p,t[r+13],21,1309151649),p=u(p,d,m,v,t[r+4],6,-145523070),v=u(v,p,d,m,t[r+11],10,-1120210379),m=u(m,v,p,d,t[r+2],15,718787259),d=u(d,m,v,p,t[r+9],21,-343485551),p=e(p,i),d=e(d,l),m=e(m,f),v=e(v,s);return[p,d,m,v]}function l(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function f(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function s(t){var e,n,r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return r}function p(t){return unescape(encodeURIComponent(t))}function d(t){return function(t){return l(i(f(t),8*t.length))}(p(t))}function m(t,e){return function(t,e){var n,r,o=f(t),a=[],c=[];for(a[15]=c[15]=void 0,o.length>16&&(o=i(o,8*t.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],c[n]=1549556828^o[n];return r=i(a.concat(f(e)),512+8*e.length),l(i(c.concat(r),640))}(p(t),p(e))}function v(t,e,n){return e?n?m(e,t):s(m(e,t)):n?d(t):s(d(t))}r?r=v:t.md5=v}(r);var o;function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}o=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var c=/\+/g;t=t.split(e);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var l=t.length;i>0&&l>i&&(l=i);for(var f=0;f<l;++f){var s,p,d,m,v=t[f].replace(c,"%20"),y=v.indexOf(n);y>=0?(s=v.substr(0,y),p=v.substr(y+1)):(s=v,p=""),d=decodeURIComponent(s),m=decodeURIComponent(p),a(o,d)?u(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o};var c,u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};c=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?f(s(t),(function(r){var o=encodeURIComponent(i(r))+n;return l(t[r])?f(t[r],(function(t){return o+encodeURIComponent(i(t))})).join(e):o+encodeURIComponent(i(t[r]))})).join(e):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(t)):""};var l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function f(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},p=(n=c,/^[0-9a-f]{32}$/);function d(t,e){if(t)return"boolean"==typeof t.protocol?t.protocol:"http"!==t.protocol&&("https"===t.protocol||void 0)}function m(t){return(t="string"==typeof t?t.trim().toLowerCase():"unspecified").match(p)?t:r(t)}function v(t){var e=n(function(t){var e={},n={protocol:1,format:1};for(var r in t)n[r]||(e[r]=t[r]);return e}(t));return e&&"?"+e||""}e={url:function(t,e,n){var r="//www.gravatar.com/avatar/";e&&e.cdn?(r=e.cdn+"/avatar/",delete e.cdn):(e&&e.protocol&&(n=d(e)),void 0!==n&&(r=n?"https://s.gravatar.com/avatar/":"http://www.gravatar.com/avatar/"));var o=v(e);return r+m(t)+o},profile_url:function(t,e,n){var r=null!=e&&null!=e.format?String(e.format):"json";if(e&&e.cdn)o=e.cdn+"/",delete e.cdn;else{e&&e.protocol&&(n=d(e));var o=n?"https://secure.gravatar.com/":"http://www.gravatar.com/"}var a=v(e);return o+m(t)+"."+r+a}};var y,h=(y=e)&&y.__esModule?y.default:y,b=[{name:"admin",role:"admin",email:"admin@carleton.ca",avatar:h.url("admin@carleton.ca",{s:"200",r:"pg",d:"identicon"})},{name:"student",role:"student",email:"student@carleton.ca",avatar:h.url("student@carleton.ca",{s:"200",r:"pg",d:"identicon"})}];function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(c,window.HTMLElement);var n,r,o,a=j(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).forumTopicsTemplateId="#forum-topics",t.unsuscriber=null,t.render(),t}return n=c,(r=[{key:"connectedCallback",value:function(){this.isConnected&&(this.unsuscriber=t().databaseManager.subscribe(this.render.bind(this)))}},{key:"disconnectedCallback",value:function(){this.unsuscriber&&this.unsuscriber()}},{key:"render",value:function(){if(t().databaseManager.ready){var e=null,n=new window.URL(window.location.toString());if(this.hasAttribute("forum-id"))e=this.getAttribute("forum-id");else{if(!n.searchParams.has("forum"))return;e=n.searchParams.get("forum")}var r=t().databaseManager.getForum(e),o=document.querySelector(this.forumTopicsTemplateId).content.cloneNode(!0);r.topics.length?r.topics.forEach((function(e){var n,a=o.querySelector('[data-list="forum-topic"]').content.cloneNode(!0),c=e.comments[0],u=(n=c.user,b.find((function(t){return t.name===n}))),i=a.querySelector('[data-element="author-avatar"]');i.src=u.avatar,i.alt=u.name;var l=a.querySelector('[data-element="title"]');l.href="/wc-course-website/forum/topic/index.html?forum=".concat(r.$loki,"&topic=").concat(e.$loki),l.innerText=e.title,a.querySelector('[data-element="author-name"]').innerText=u.name,a.querySelector('[data-element="author-email"]').innerText=u.email;var f=a.querySelector('[data-element="content"]');c.content.split("\n").forEach((function(t){var e=document.createElement("p");e.innerHTML=t,f.prepend(e)})),a.querySelector('[data-element="delete-button"]').onclick=function(){t().databaseManager.deleteForumTopic(e)},o.prepend(a)})):o.querySelector('[data-element="no-topics"]').style.display="block",o.querySelector('[data-element="new-topic"]').onsubmit=function(e){e.preventDefault();var n=e.target.querySelector('[data-element="topic-name"]').value,o=e.target.querySelector('[data-element="topic-content"]').value;t().databaseManager.addForumTopic(r.$loki,n,b[0].name,o)},this.innerHTML="",this.appendChild(o)}}}])&&w(n.prototype,r),o&&w(n,o),c}();window.customElements.define("forum-topics",R)}();
//# sourceMappingURL=forum.d62af44e.js.map
